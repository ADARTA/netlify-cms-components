language: node_js
node_js:
  - '8'
cache:
  yarn: true
  directories:
    - $HOME/.npm
    - $HOME/.yarn-cache
    - node_modules

branches:
  only:
    - master

install:
  - yarn
  - yarn global add lerna
  - lerna bootstrap

script:
  - cd packages/netlify-cms-backend-fs
  - yarn build:copy
  - yarn build:lib

after_success:
  - yarn semantic-release
